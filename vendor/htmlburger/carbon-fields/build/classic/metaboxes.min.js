(()=>{var e={877:e=>{e.exports=e=>(t,r)=>{if(0!==t)return;if("function"!=typeof e)return r(0,(()=>{})),void r(2);let n,o;const i=e=>{n=n||2===e,n&&"function"==typeof o&&o()};r(0,i),o=e(((e,t)=>{n||0===e||(r(e,t),i(e))}))}},996:e=>{e.exports=e=>t=>(r,n)=>{if(0!==r)return;let o;t(0,((t,r)=>{0===t?(o=r,n(t,r)):1===t?e(r)?n(t,r):o(1):n(t,r)}))}},678:()=>{},341:()=>{},669:()=>{},210:()=>{},308:()=>{},19:()=>{},365:()=>{},825:()=>{},977:()=>{},764:e=>{e.exports=function(){return this.cf.core}()},773:e=>{e.exports=function(){return this.cf.vendor["@wordpress/compose"]}()},753:e=>{e.exports=function(){return this.cf.vendor["@wordpress/data"]}()},158:e=>{e.exports=function(){return this.cf.vendor["@wordpress/element"]}()},994:e=>{e.exports=function(){return this.cf.vendor["@wordpress/hooks"]}()},256:e=>{e.exports=function(){return this.cf.vendor["@wordpress/i18n"]}()},901:e=>{e.exports=function(){return this.cf.vendor["callbag-basics"]}()},831:e=>{e.exports=function(){return this.cf.vendor.classnames}()},388:e=>{e.exports=function(){return this.cf.vendor.immer}()},609:e=>{e.exports=function(){return this.cf.vendor.lodash}()},319:e=>{e.exports=function(){return this.cf.vendor["refract-callbag"]}()}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{"use strict";r.r(n),r.d(n,{getContainerType:()=>Xe,registerContainerType:()=>Je});var e={};r.r(e),r.d(e,{addContainer:()=>x,addFields:()=>E,cloneFields:()=>P,lockSaving:()=>F,receiveSidebar:()=>I,removeContainer:()=>D,removeFields:()=>S,setupState:()=>v,unlockSaving:()=>T,updateFieldValue:()=>j,updateState:()=>w});var t={};r.r(t),r.d(t,{getComplexGroupValues:()=>B,getContainerById:()=>A,getContainers:()=>C,getFieldById:()=>$,getFields:()=>k,getFieldsByContainerId:()=>N,isDirty:()=>L,isFieldUpdated:()=>R,isSavingLocked:()=>G});var o=r(256),i=r(994),a=r(753),c=r(609),s=r.n(c);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function d(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===l(t)?t:String(t)}function u(e,t,r){return(t=d(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(388),f=r.n(p),b=r(764);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r,n){const o=(0,c.cloneDeep)(r[e]);return o.id=t,"complex"===o.type&&o.value.forEach((e=>{e.id=(0,b.uniqueId)(),n=e.fields.reduce(((e,t)=>{const n=t.id,o=(0,b.uniqueId)();return t.id=o,g(n,o,r,e)}),n)})),n.concat(o)}function h(e,t,r){const n=t[e];return"complex"===n.type&&n.value.forEach((e=>{r=e.fields.reduce(((e,r)=>h(r.id,t,e)),r)})),r.concat(e)}const O=(0,a.combineReducers)({containers:function(e={},t){switch(t.type){case"SETUP_STATE":return t.payload.containers;case"UPDATE_STATE":return f()(e,(e=>{(0,c.values)(t.payload.containers).forEach((t=>{e[t.id]=t}))}));case"ADD_CONTAINER":return f()(e,(e=>{e[t.payload.id]=t.payload}));case"REMOVE_CONTAINER":return(0,c.omit)(e,t.payload);default:return e}},fields:function(e={},t){switch(t.type){case"SETUP_STATE":return t.payload.fields;case"UPDATE_STATE":return f()(e,(e=>{(0,c.values)(t.payload.fields).forEach((t=>{e[t.id]=t}))}));case"UPDATE_FIELD_VALUE":return f()(e,(r=>{const{fieldId:n,value:o,fieldsToRemove:i}=t.payload;r[n].value=o;i.reduce(((t,r)=>h(r,e,t)),[]).forEach((e=>{(0,c.unset)(r,e)}))}));case"ADD_FIELDS":return f()(e,(e=>{t.payload.fields.forEach((t=>{e[t.id]=t}))}));case"CLONE_FIELDS":return f()(e,(e=>{const{originFieldIds:r,cloneFieldIds:n}=t.payload,o=r.reduce(((t,r,o)=>g(r,n[o],e,t)),[]);(0,c.assign)(e,(0,c.keyBy)(o,"id"))}));case"REMOVE_FIELDS":const r=t.payload.fieldIds.reduce(((t,r)=>h(r,e,t)),[]);return(0,c.omit)(e,r);case"RECEIVE_SIDEBAR":return f()(e,(e=>{(0,c.forEach)(e,(e=>{"sidebar"===e.type&&e.options.unshift(t.payload)}))}));default:return e}},savingLock:function(e={},t){switch(t.type){case"LOCK_SAVING":return y(y({},e),{},{[t.payload.lockName]:!0});case"UNLOCK_SAVING":return(0,c.omit)(e,[t.payload.lockName]);default:return e}},isDirty:function(e=!1,t){return"UPDATE_FIELD_VALUE"===t.type||e},isFieldUpdated:function(e,t){return"UPDATE_FIELD_VALUE"===t.type&&{action:t}}});function v(e,t){return{type:"SETUP_STATE",payload:{containers:e,fields:t}}}function w(e,t){return{type:"UPDATE_STATE",payload:{containers:e,fields:t}}}function j(e,t,r=[]){return{type:"UPDATE_FIELD_VALUE",payload:{fieldId:e,value:t,fieldsToRemove:r}}}function E(e){return{type:"ADD_FIELDS",payload:{fields:e}}}function P(e,t){return{type:"CLONE_FIELDS",payload:{originFieldIds:e,cloneFieldIds:t}}}function S(e){return{type:"REMOVE_FIELDS",payload:{fieldIds:e}}}function x(e){return{type:"ADD_CONTAINER",payload:e}}function D(e){return{type:"REMOVE_CONTAINER",payload:e}}function I(e){return{type:"RECEIVE_SIDEBAR",payload:e}}function F(e){return{type:"LOCK_SAVING",payload:{lockName:e}}}function T(e){return{type:"UNLOCK_SAVING",payload:{lockName:e}}}function C(e){return e.containers}function A(e,t){return e.containers[t]}function k(e){return e.fields}function N(e,t){return(0,c.filter)(e.fields,["container_id",t])}function $(e,t){return e.fields[t]}function G(e){return Object.keys(e.savingLock).length>0}function L(e){return e.isDirty}function R(e){return e.isFieldUpdated}function B(e,t){let r=(0,c.pick)(k(e),t);return r=(0,c.mapKeys)(r,(e=>e.base_name.replace(/\-/g,"_"))),r=(0,c.mapValues)(r,(e=>e.value)),r}function U(e,t,r){return(e=(0,c.cloneDeep)(e)).id=(0,b.uniqueId)(),e.container_id=t,"complex"===e.type&&e.value.forEach((e=>{e.id=(0,b.uniqueId)(),e.container_id=t,e.fields=e.fields.map((e=>U(e,t,r)))})),r.push(e),(0,c.pick)(e,["id","type","name","base_name"])}function V(e){const t=[],r=e.filter((({id:e})=>!(0,c.endsWith)(e,"__i__"))).map((e=>(0,c.assign)({},e,{fields:e.fields.map((r=>U(r,e.id,t)))})));return{containers:r,fields:t}}(0,a.registerStore)("carbon-fields/metaboxes",{reducer:O,actions:e,selectors:t});const{containers:q,fields:M}=V((0,c.get)(window.cf,"preloaded.containers",[]));(0,a.dispatch)("carbon-fields/metaboxes").setupState((0,c.keyBy)(q,"id"),(0,c.keyBy)(M,"id"));var Q=r(773);const K=(0,Q.createHigherOrderComponent)((e=>{const t=(0,a.withSelect)(((e,t)=>{const{compactInput:r,compactInputKey:n}=window.cf.config,o=e("carbon-fields/metaboxes").getFieldById(t.id),i=o&&o.value;let a=t.name||o.name;return r&&!t.name&&-1===a.indexOf("widget-carbon_fields")&&(a=`${n}[${a}]`),{field:o,name:a,value:i}})),r=(0,a.withDispatch)((e=>{const{updateFieldValue:t}=e("carbon-fields/metaboxes");return{onChange:t}}));return(0,Q.compose)(t,r)(e)}),"withField");const W=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e,r){if(0===e){var n=!1;for(r(0,(function(e){2===e&&(n=!0,t.length=0)}));0!==t.length;)r(1,t.shift());n||r(2)}}},H={},z=e=>t=>(r,n)=>{if(0!==r)return;let o,i,a=!1,c=H;t(0,((t,r)=>{if(0===t)return o=r,e(0,((e,t)=>0===e?(i=t,void i(1)):1===e?(c=void 0,i(2),o(2),void(a&&n(2))):void(2===e&&(i=null,null!=t&&(c=t,o(2),a&&n(e,t)))))),a=!0,n(0,((e,t)=>{c===H&&(2===e&&i&&i(2),o(e,t))})),void(c!==H&&n(2,c));2===t&&i&&i(2),n(t,r)}))};var J=function(e,t){return e===t};const X=function(e){return void 0===e&&(e=J),function(t){return function(r,n){if(0===r){var o,i,a=!1;t(0,(function(t,r){0===t&&(i=r),1===t?a&&e(o,r)?i(1):(a=!0,o=r,n(1,r)):n(t,r)}))}}}};var Y=r(901);function Z(e,t,r=[]){return void 0===e?[]:(0,c.pick)(t,(0,c.difference)((0,c.map)(e.fields,"id"),r))}function ee(e,t=0){return(0,c.map)(e,(e=>[e.id,`${(0,c.repeat)("parent.",t)}${e.base_name}`]))}const te=(0,b.withConditionalLogic)((function(e,t){const{getFieldsByContainerId:r}=(0,a.select)("carbon-fields/metaboxes");return(0,Y.pipe)((0,Y.merge)(W(r(e.containerId)),(0,b.fromSelector)(r,e.containerId)),z(t.unmount),X(c.isEqual))}),(function(e,t){t=(0,c.keyBy)(t,"id");const r=(0,a.select)("carbon-fields/metaboxes").getContainerById(e.containerId);let n=[];if((0,c.some)(r.fields,["id",e.id]))n=Z(r,t,[e.id]),n=ee(n);else{const o=e.name.replace(new RegExp(`^${window.cf.config.compactInputKey}\\[(.+?)\\]`),"$1"),i=(0,c.find)(t,(t=>t.container_id===e.containerId&&(0,c.startsWith)(o,t.name)));let a=o.split(/\[|\]/g);a.shift(),a=a.filter((e=>""!==e)),a.pop();let s=a.reduce(((e,t)=>isNaN(t)?e+1:e),0);n=Z(r,t,[i.id]),n=ee(n,s+1);let l=`${i.id}.value`;for(;a.length>0;){const r=a.shift(),o=!isNaN(r),i=!o;if(o){l=`${l}[${r}]`;const o=Z((0,c.get)(t,l),t,[e.id]);n=n.concat(ee(o,s)),l=`${l}.fields`}if(i){const e=(0,c.find)((0,c.get)(t,l),["name",r]);e&&(l=`${e.id}.value`),s--}}}return n=n.map((([e,r])=>[r,(0,c.get)(t,`${e}.value`)])),(0,c.fromPairs)(n)}));function re(){return!(0,c.isUndefined)(window._wpLoadBlockEditor)}function ne(e,t){return(0,c.find)(e,(e=>e.name===t))}(0,i.addFilter)("carbon-fields.association.metabox","carbon-fields/metaboxes",(0,b.withProps)((e=>({hierarchyResolver(){const t=(0,a.select)("carbon-fields/metaboxes").getContainerById(e.containerId),r=(0,a.select)("carbon-fields/metaboxes").getFieldsByContainerId(e.containerId);let n=function(e){const{compactInput:t,compactInputKey:r}=window.cf.config;return t&&0===e.indexOf(r)?e.replace(new RegExp(`^${r}\\[(.+?)\\]`),"$1"):e}(e.name).split(/\[|\]/g);if(n=n.filter((e=>""!==e)),"widget"===t.type)return e.field.base_name;const o=ne(r,n.shift());let i=r.indexOf(o),s=o.base_name;for(;n.length>0;){const t=n.shift(),o=!isNaN(t),a=t===e.field.base_name,l=!o&&!a;if(o&&(i=`${i}.value.${t}.name`,s=`${s}[${t}]:${(0,c.get)(r,i)}/`),l){const e=ne((0,c.get)(r,i.replace(/\.name$/,".fields")),t),n=(0,c.find)(r,["id",e.id]);i=r.indexOf(n),s=`${s}${n.base_name}`}a&&(s=`${s}${t}`)}return s}}))));var oe=r(158);r(19),r(341);const ie=(0,Q.compose)(K,(0,b.withFilters)("carbon-fields.field-wrapper.metabox"))(b.Field);var ae=r(158);class ce extends oe.Component{constructor(...e){super(...e),u(this,"handleAddGroup",((e,t)=>{const{id:r,field:n,value:o,addFields:i,onChange:a}=this.props;e=(0,c.cloneDeep)(e);const s=[];e.id=(0,b.uniqueId)(),e.container_id=n.container_id,e.fields=e.fields.map((e=>U(e,n.container_id,s))),e.collapsed=!1,i(s),a(r,o.concat(e)),t(e)})),u(this,"handleCloneGroup",((e,t)=>{const{id:r,value:n,cloneFields:o,onChange:i}=this.props,a=e.fields.map((e=>e.id)),s=a.map((()=>(0,b.uniqueId)())),l=(0,c.cloneDeep)(e);l.id=(0,b.uniqueId)(),l.fields.forEach(((e,t)=>{e.id=s[t]})),o(a,s),i(r,f()(n,(t=>{t.splice(n.indexOf(e)+1,0,l)}))),t(l)})),u(this,"handleRemoveGroup",(e=>{const{id:t,value:r,onChange:n}=this.props;n(t,(0,c.without)(r,e),e.fields.map((e=>e.id)))})),u(this,"handleToggleGroup",(e=>{const{field:t,value:r,onChange:n}=this.props;n(t.id,f()(r,(t=>{const r=(0,c.find)(t,["id",e]);r.collapsed=!r.collapsed})))})),u(this,"handleToggleAllGroups",(e=>{const{field:t,value:r,onChange:n}=this.props;n(t.id,f()(r,(t=>{t.forEach((t=>{t.collapsed=e}))})))})),u(this,"handleGroupSetup",((e,t)=>(0,c.assign)({},t,{id:e.id,name:e.name,prefix:`${this.props.name}[${t.index}]`,fields:e.fields,collapsed:e.collapsed,context:"metabox"}))),u(this,"handleGroupFieldSetup",((e,t,r)=>[ie,(0,c.assign)({},t,{key:e.id,id:e.id,containerId:this.props.containerId,name:`${r.prefix}[${e.name}]`})]))}render(){const{handleGroupSetup:e,handleGroupFieldSetup:t,handleAddGroup:r,handleCloneGroup:n,handleRemoveGroup:o,handleToggleGroup:i,handleToggleAllGroups:a}=this,{value:c,children:s}=this.props;return s({allGroupsAreCollapsed:c.every((({collapsed:e})=>e)),handleGroupSetup:e,handleGroupFieldSetup:t,handleAddGroup:r,handleCloneGroup:n,handleRemoveGroup:o,handleToggleGroup:i,handleToggleAllGroups:a})}}const se=(0,a.withSelect)(((e,t)=>{const{getComplexGroupValues:r}=e("carbon-fields/metaboxes");return{groupValues:t.value.map((e=>{const t=e.fields.map((e=>e.id));return[e.name,r(t)]}))}})),le=(0,a.withDispatch)((e=>{const{addFields:t,cloneFields:r}=e("carbon-fields/metaboxes");return{addFields:t,cloneFields:r}}));function de(){return de=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},de.apply(this,arguments)}(0,i.addFilter)("carbon-fields.complex.metabox","carbon-fields/metaboxes",(e=>(0,Q.compose)(se,le)((t=>{const{id:r,field:n,name:o,value:i,groupValues:a}=t;return ae.createElement(ce,t,(({allGroupsAreCollapsed:c,handleGroupSetup:s,handleGroupFieldSetup:l,handleAddGroup:d,handleCloneGroup:u,handleRemoveGroup:p,handleToggleGroup:f,handleToggleAllGroups:b})=>ae.createElement(e,{groupIdKey:"id",groupFilterKey:"name",id:r,field:n,name:o,value:i,groupValues:a,allGroupsAreCollapsed:c,onGroupSetup:s,onGroupFieldSetup:l,onAddGroup:d,onCloneGroup:u,onRemoveGroup:p,onToggleGroup:f,onToggleAllGroups:b,onChange:t.onChange})))}))));var ue=r(158);(0,i.addFilter)("carbon-fields.date_time.metabox","carbon-fields/metaboxes",(e=>t=>ue.createElement(e,de({buttonText:(0,o.__)("Select Date","carbon-fields-ui")},t))));var pe=r(158);(0,i.addFilter)("carbon-fields.file.metabox","carbon-fields/metaboxes",(e=>t=>pe.createElement(e,de({buttonLabel:(0,o.__)("Select File","carbon-fields-ui"),mediaLibraryButtonLabel:(0,o.__)("Use File","carbon-fields-ui"),mediaLibraryTitle:(0,o.__)("Select File","carbon-fields-ui")},t))));var fe=r(158);(0,i.addFilter)("carbon-fields.image.metabox","carbon-fields/metaboxes",(e=>t=>fe.createElement(e,de({buttonLabel:(0,o.__)("Select Image","carbon-fields-ui"),mediaLibraryButtonLabel:(0,o.__)("Use Image","carbon-fields-ui"),mediaLibraryTitle:(0,o.__)("Select Image","carbon-fields-ui")},t))));r(825),r(365);var be=r(158);(0,i.addFilter)("carbon-fields.media_gallery.metabox","carbon-fields/metaboxes",(e=>t=>be.createElement(e,de({buttonLabel:(0,o.__)("Select Attachments","carbon-fields-ui"),mediaLibraryButtonLabel:(0,o.__)("Use Attachments","carbon-fields-ui"),mediaLibraryTitle:(0,o.__)("Select Attachments","carbon-fields-ui")},t))));r(977);(0,i.addFilter)("carbon-fields.sidebar.metabox","carbon-fields/metaboxes",(0,a.withDispatch)((e=>{const{receiveSidebar:t}=e("carbon-fields/metaboxes");return{onAdded:t}}))),(0,i.addFilter)("carbon-fields.field-edit.metabox","carbon-fields/metaboxes",(0,Q.compose)(K,te,(0,a.withDispatch)((e=>{if(re()){const{lockPostSaving:t,unlockPostSaving:r}=e("core/editor");return{lockSaving:t,unlockSaving:r}}const{lockSaving:t,unlockSaving:r}=e("carbon-fields/metaboxes");return{lockSaving:t,unlockSaving:r}})),b.withValidation));var me=r(319);const ye=(0,me.withEffects)((function(){return(0,b.fromSelector)((0,a.select)("carbon-fields/metaboxes").isSavingLocked)}),{handler:function(){return function(e){document.querySelectorAll('\n\t\t\t#publishing-action input#publish,\n\t\t\t#publishing-action input#save,\n\t\t\t#addtag input#submit,\n\t\t\t#edittag input[type="submit"],\n\t\t\t#your-profile input#submit\n\t\t').forEach((t=>{t.disabled=e}))}}})((function(){return null})),ge=(...e)=>t=>(r,n)=>{if(0!==r)return;let o,i,a=!1,c=!1;for(n(0,((t,r)=>{c&&1===t&&(i=[1,r]),2===t&&(a=!0,e.length=0),o&&o(t,r)}));0!==e.length;)1===e.length&&(c=!0),n(1,e.shift());a||t(0,((e,t)=>{if(0===e)return o=t,c=!1,void(i&&(o(...i),i=null));n(e,t)}))};function he(e){const t=parseInt(e.value,10);return!isNaN(t)&&t>=0?t:0}function Oe(e){let t=0;if(e.className){const r=e.className.match(/^level-(\d+)/);r&&(t=parseInt(r[1],10)+1)}return t}function ve(e){const t=[];let r=e,n=Oe(e);for(;n>0&&r;){if(Oe(r)!==n){r=r.previousSibling;continue}const e=parseInt(r.value,10);e>0&&t.unshift(e),r=r.previousSibling,n--}return t}const we={post_ancestors:[],post_parent_id:0,post_level:1};function _e(e){const t=e.options[e.selectedIndex];return{post_ancestors:ve(t),post_parent_id:he(t),post_level:Oe(t)+1}}function je(e,t,r=[]){const n=(0,c.find)(t,["id",e]);return n?(r.unshift(n.id),n.parent?je(n.parent,t,r):r):r}(0,i.addFilter)("carbon-fields.conditional-display-post-parent.classic","carbon-fields/metaboxes",(()=>{const e=document.querySelector("select#parent_id");return e?(0,Y.pipe)(Y.fromEvent.default(e,"change"),(0,Y.map)((({target:e})=>_e(e))),ge(_e(e))):W(we)})),(0,i.addFilter)("carbon-fields.conditional-display-post-parent.gutenberg","carbon-fields/metaboxes",(()=>{const{getPostType:e,getEntityRecords:t}=(0,a.select)("core");return(0,Y.pipe)((0,Y.combine)((0,b.fromSelector)((0,a.select)("core/editor").getCurrentPostId),(0,b.fromSelector)((0,a.select)("core/editor").getEditedPostAttribute,"type"),(0,b.fromSelector)((0,a.select)("core/editor").getEditedPostAttribute,"parent")),X(c.isEqual),(0,Y.map)((([r,n,o])=>{if(o=parseInt(o,10),isNaN(o))return we;const i=e(n);if(!(0,c.get)(i,["hierarchical"],!1))return we;const a=je(o,t("postType",n,{per_page:-1,exclude:r,parent_exclude:r,orderby:"menu_order",order:"asc"})||[]);return{post_ancestors:a,post_parent_id:o,post_level:a.length+1}})))}));const Ee=(e,t,r)=>(n,o)=>{if(0!==n)return;let i=!1;const a=e=>{o(1,e)};if(o(0,(n=>{if(2===n)if(i=!0,e.removeEventListener)e.removeEventListener(t,a,r);else{if(!e.removeListener)throw new Error("cannot remove listener from node. No method found.");e.removeListener(t,a)}})),!i)if(e.addEventListener)e.addEventListener(t,a,r);else{if(!e.addListener)throw new Error("cannot add listener to node. No method found.");e.addListener(t,a)}};var Pe=r(996),Se=r.n(Pe);const xe=(e,t,r)=>Se()((r=>{let n=r.target;for(;n!==e;){if(n.matches(t))return!0;n=n.parentElement}return!1}))(Ee(e,r)),De={post_format:"standard"};function Ie(e){let t=e.value;return"0"===t&&(t="standard"),{post_format:t}}(0,i.addFilter)("carbon-fields.conditional-display-post-format.classic","carbon-fields/metaboxes",(()=>{const e=document.querySelector("div#post-formats-select");return e?(0,Y.pipe)(xe(e,"input.post-format","change"),(0,Y.map)((({target:e})=>Ie(e))),ge(Ie(e.querySelector("input.post-format:checked")))):W(De)})),(0,i.addFilter)("carbon-fields.conditional-display-post-format.gutenberg","carbon-fields/metaboxes",(()=>(0,Y.pipe)((0,b.fromSelector)((0,a.select)("core/editor").getEditedPostAttribute,"format"),X(),(0,Y.filter)(Boolean),(0,Y.map)((e=>({post_format:e}))),ge(De))));const Fe={post_template:""};function Te(e){let{value:t}=e;return"default"===t&&(t=""),{post_template:t}}function Ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}(0,i.addFilter)("carbon-fields.conditional-display-post-template.classic","carbon-fields/metaboxes",(()=>{const e=document.querySelector("select#page_template");return e?(0,Y.pipe)(Y.fromEvent.default(e,"change"),(0,Y.map)((({target:e})=>Te(e))),ge(Te(e))):W(Fe)})),(0,i.addFilter)("carbon-fields.conditional-display-post-template.gutenberg","carbon-fields/metaboxes",(()=>(0,Y.pipe)((0,b.fromSelector)((0,a.select)("core/editor").getEditedPostAttribute,"template"),X(),(0,Y.filter)(c.isString),(0,Y.map)((e=>({post_template:e}))),ge(Fe))));function ke(e,t){e[`original_${t}`]=e[t],e[t]=function(...r){const n=new Event("change"),o=window.jQuery(r[0]).closest(".postbox").find("textarea.the-tags").get(0),i=e[`original_${t}`](...r);return o.dispatchEvent(n),i}}function Ne(){return[...document.querySelectorAll('div[id^="taxonomy-"]')].map((e=>{const t=e.id.replace("taxonomy-","");return(0,Y.pipe)(xe(e.querySelector(`#${t}checklist`),'input[type="checkbox"]',"change"),(0,Y.scan)(((e,{target:r})=>f()(e,(e=>{const n=parseInt(r.value,10);r.checked?e[t].push(n):(0,c.pull)(e[t],n)}))),{[t]:[]}),ge(function(e){return[...document.querySelectorAll(`#${e}checklist input[type="checkbox"]:checked`)].reduce(((t,r)=>{const n=parseInt(r.value,10);return t[e].push(n),t}),{[e]:[]})}(t)))}))}function $e(){return[...document.querySelectorAll('div[id^="tagsdiv-"]')].map((e=>{const t=e.id.replace("tagsdiv-","");return(0,Y.pipe)(Y.fromEvent.default(e.querySelector("textarea.the-tags"),"change"),(0,Y.map)((({target:e})=>({[t]:e.value?e.value.split(","):[]}))),ge(function(e){const t=document.querySelector(`#tagsdiv-${e} textarea.the-tags`),r=t.value?t.value.split(","):[];return{[e]:r}}(t)))}))}window.tagBox&&(ke(window.tagBox,"parseTags"),ke(window.tagBox,"flushTags")),(0,i.addFilter)("carbon-fields.conditional-display-post-term.classic","carbon-fields/metaboxes",(()=>(0,Y.pipe)((0,Y.merge)(...Ne(),...$e()),(0,Y.scan)(((e,t)=>({post_term:Ae(Ae({},e.post_term),t)})),{post_term:{}})))),(0,i.addFilter)("carbon-fields.conditional-display-post-term.gutenberg","carbon-fields/metaboxes",(()=>{const{getTaxonomies:e}=(0,a.select)("core"),{getEditedPostAttribute:t}=(0,a.select)("core/editor");return(0,Y.pipe)((0,b.fromSelector)(e,{per_page:-1}),(0,Y.filter)(Boolean),(0,Y.map)((e=>{const r=e.map((e=>[e.slug,t(e.rest_base)||[]]));return{post_term:(0,c.fromPairs)(r)}})))}));const Ge={term_ancestors:[],term_parent:0,term_level:1};function Le(e){const t=e.options[e.selectedIndex];return{term_ancestors:ve(t),term_parent:he(t),term_level:Oe(t)+1}}(0,i.addFilter)("carbon-fields.conditional-display-term-parent.classic","carbon-fields/metaboxes",(()=>{const e=document.querySelector("select#parent");return e?(0,Y.pipe)(Y.fromEvent.default(e,"change"),(0,Y.map)((({target:e})=>Le(e))),ge(Le(e))):W(Ge)}));const Re={user_role:""};function Be(e){return{user_role:e.value}}(0,i.addFilter)("carbon-fields.conditional-display-user-role.classic","carbon-fields/metaboxes",(()=>{const e=document.querySelector("select#role");if(!e){const e=document.querySelector("fieldset[data-profile-role]");return W(e?{user_role:e.dataset.profileRole}:Re)}return(0,Y.pipe)(Y.fromEvent.default(e,"change"),(0,Y.map)((({target:e})=>Be(e))),ge(Be(e)))}));const Ue=(0,Q.createHigherOrderComponent)((e=>(0,a.withSelect)(((e,{id:t})=>({container:e("carbon-fields/metaboxes").getContainerById(t)})))(e)),"withContainer");(0,i.addFilter)("carbon-fields.register-container-type","carbon-fields/metaboxes",((e,t,r)=>(0,Q.compose)(Ue,(0,b.withFilters)(`carbon-fields.${e}.${t}`))(r)));r(308);(0,i.addFilter)("carbon-fields.widget.classic","carbon-fields/metaboxes",(0,me.withEffects)((function(){return(0,b.fromSelector)((0,a.select)("carbon-fields/metaboxes").isFieldUpdated)}),{handler:function(e){return function({action:t}){if(!t)return;const{container:r}=e,{payload:n}=t;if(r.fields.map((e=>e.id)).indexOf(n.fieldId)>=0){window.jQuery(`.container-${r.id}`).closest(".widget-inside").trigger("change")}}}}));var Ve=r(877),qe=r.n(Ve);function Me(e,t,r=(...e)=>e){return qe()((n=>{const o=(...e)=>n(1,r(...e));return e(o),()=>t(o)}))}(0,i.addFilter)("carbon-fields.term_meta.classic","carbon-fields/metaboxes",(0,me.withEffects)((function(){return(0,Y.pipe)(Me((e=>window.jQuery(document).on("ajaxSuccess",e)),(e=>window.jQuery(document).off("ajaxSuccess",e)),((e,t,r,n)=>({options:r,data:n}))),(0,Y.filter)((({options:e,data:t})=>e.data&&e.data.indexOf("carbon_fields_container")>-1&&e.data.indexOf("add-tag")>-1&&!t.documentElement.querySelector("wp_error"))))}),{handler:function(e){return function(){const t=s().map(e.container.fields,"id"),{containers:r,fields:n}=V(s().get(window.cf,"preloaded.containers",[])),o=s().find(r,["id",e.id]),i=s().filter(n,["container_id",e.id]),{updateState:c,removeFields:l}=(0,a.dispatch)("carbon-fields/metaboxes");c(s().keyBy([o],"id"),s().keyBy(i,"id")),l(t)}}}));r(669);(0,i.addFilter)("carbon-fields.theme_options.classic","carbon-fields/metaboxes",(0,me.withEffects)((function(){return(0,Y.pipe)(Ee(window,"scroll"),(0,Y.map)((()=>window.jQuery(window).scrollTop())))}),{handler:function(){return function(e){const t=window.jQuery(".carbon-box:first"),r=window.jQuery("#postbox-container-1"),n=window.jQuery("#wpadminbar").height()+10,o=t.offset().top-n;o>0&&r.toggleClass("fixed",e>=o).css("top",n)}}}));r(210);var Qe=r(831),Ke=r.n(Qe),We=(r(678),r(158));class He extends oe.Component{constructor(...e){super(...e),u(this,"state",{currentTab:null}),u(this,"renderField",(e=>{const t=(0,b.getFieldType)(e.type,"metabox");return t?We.createElement(ie,{key:e.id,id:e.id},We.createElement(t,{id:e.id,containerId:this.props.id})):null})),u(this,"handleTabClick",(e=>{this.setState({currentTab:e})}))}componentDidMount(){const{container:e}=this.props;this.isTabbed(e)&&this.setState({currentTab:Object.keys(e.settings.tabs)[0]})}isTabbed(e){return(0,c.isPlainObject)(e.settings.tabs)}render(){const{currentTab:e}=this.state,{container:t}=this.props,r=this.isTabbed(t),n=Ke()(["cf-container",`cf-container-${t.id}`,`cf-container-${(0,c.kebabCase)(t.type)}`,...t.classes,{"cf-container--plain":!r,[`cf-container--tabbed cf-container--${t.layout}`]:r}]);return We.createElement("div",{className:n},We.createElement("input",{type:"hidden",name:t.nonce.name,value:t.nonce.value}),r&&We.createElement("div",{className:`cf-container__tabs cf-container__tabs--${t.layout}`},We.createElement("ul",{className:"cf-container__tabs-list"},(0,c.map)(t.settings.tabs,((t,r)=>{const n=Ke()("cf-container__tabs-item",{"cf-container__tabs-item--current":r===e});return We.createElement("li",{key:r,className:n,tabIndex:-1,role:"tab","aria-selected":e===r},We.createElement("button",{type:"button",onClick:()=>this.handleTabClick(r),dangerouslySetInnerHTML:{__html:r}}))})))),r&&(0,c.map)(t.settings.tabs,((r,n)=>We.createElement("div",{className:"cf-container__fields",key:n,hidden:n!==e},(0,c.map)(r,(e=>{const r=(0,c.find)(t.fields,["name",e]);return this.renderField(r)}))))),!r&&We.createElement("div",{className:"cf-container__fields"},(0,c.map)(t.fields,this.renderField)))}}const ze=He,{registerContainerType:Je,getContainerType:Xe}=(0,b.createRegistry)("container",["classic","gutenberg"]);function Ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ze(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const et={};var tt=r(158);function rt(e,t){const r=document.querySelector(`.container-${e.id}`),n=Xe(e.type,t);if(r){const t=tt.createElement(n,{id:e.id});if(oe.createRoot){const n=(0,oe.createRoot)(r);n.render(t),i=e.id,a=n,et[i]=Ze(Ze({createdAt:Math.floor(Date.now()/1e3)},a),{},{unmount(){parseFloat(window.cf.config.wp_version)>=6.2?Math.floor(Date.now()/1e3)-et[i].createdAt>=3&&(a.unmount(),delete et[i]):(a.unmount(),delete et[i])}})}else(0,oe.render)(t,r,(()=>{r.dataset.mounted=!0}))}else console.error((0,o.sprintf)((0,o.__)('Could not find DOM element for container "%1$s".',"carbon-fields-ui"),e.id));var i,a}["post_meta","term_meta","user_meta","comment_meta","network","theme_options","nav_menu_item","widget"].forEach((e=>Je(e,ze)));const nt={operators:[],isOperatorSupported(e){return this.operators.indexOf(e)>-1},evaluate:()=>!1};function ot(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function it(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ot(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function at(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ct(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?at(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):at(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function st(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?st(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):st(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const dt={comparers:[it(it({},nt),{},{operators:["=","!="],evaluate(e,t,r){switch(t){case"=":return e==r;case"!=":return e!=r;default:return!1}}}),ct(ct({},nt),{},{operators:["IN","NOT IN"],evaluate(e,t,r){switch(t){case"IN":return r.indexOf(e)>-1;case"NOT IN":return-1===r.indexOf(e);default:return!1}}}),lt(lt({},nt),{},{operators:[">",">=","<","<="],evaluate(e,t,r){switch(t){case">":return e>r;case">=":return e>=r;case"<":return e<r;case"<=":return e<=r;default:return!1}}})],isFulfiled(e,t){const{compare:r,value:n}=e;return this.firstComparerIsCorrect(this.getEnvironmentValue(e,t),r,n)},firstComparerIsCorrect(e,t,r){const n=(0,c.find)(this.comparers,(e=>e.isOperatorSupported(t)));return n?n.evaluate(e,t,r):(console.error((0,o.sprintf)((0,o.__)('Unsupported container condition comparison operator used - "%1$s".',"carbon-fields-ui"),t)),!1)},getEnvironmentValue:(e,t)=>t[e.type]};function ut(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ut(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const ft=pt(pt({},dt),{},{getEnvironmentValue:()=>!0});function bt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const yt=mt(mt({},nt),{},{operators:["=","!="],evaluate(e,t,r){switch(t){case"=":return(0,c.includes)(e,r);case"!=":return!(0,c.includes)(e,r);default:return!1}}});function gt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ht(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Ot=ht(ht({},dt),{},{comparers:[yt],isFulfiled(e,t){let{compare:r,value:n}=e;if((0,c.isArray)(n)){let o;switch(r){case"IN":r="=",o="some";break;case"NOT IN":r="!=",o="every";break;default:return!1}return n.map((n=>this.isFulfiled(ht(ht({},e),{},{compare:r,value:n}),t)))[o](Boolean)}return n=n.taxonomy_object.hierarchical?n.term_object.term_id:n.term_object.name,this.firstComparerIsCorrect(this.getEnvironmentValue(e,t),r,n)},getEnvironmentValue:(e,t)=>(0,c.get)(t,`post_term.${e.value.taxonomy}`,[])});function vt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function wt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const _t=wt(wt({},dt),{},{isFulfiled(e,t){if("default"===(e=wt({},e)).value)e.value="";else if((0,c.isArray)(e.value)){const t=e.value.indexOf("default");-1!==t&&(e.value[t]="")}return dt.isFulfiled(e,t)}});function jt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Pt=Et(Et({},nt),{},{operators:["IN","NOT IN"],evaluate(e,t,r){switch(t){case"IN":return(0,c.intersection)(e,r).length>0;case"NOT IN":return 0===(0,c.intersection)(e,r).length;default:return!1}}});function St(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?St(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):St(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Dt=xt(xt({},dt),{},{comparers:[yt,Pt],getEnvironmentValue:(e,t)=>(0,c.get)(t,"post_ancestors",[])});function It(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ft(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?It(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):It(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Tt=Ft(Ft({},dt),{},{isFulfiled(e,t){const{compare:r}=e;let{value:n}=e;return(0,c.isArray)(n)?n=n.map((e=>e.term_object.term_id)):(0,c.isPlainObject)(n)&&(n=n.term_object.term_id),this.firstComparerIsCorrect(this.getEnvironmentValue(e,t),r,n)}});function Ct(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function At(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ct(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const kt=At(At({},dt),{},{comparers:[yt,Pt],isFulfiled(e,t){const{compare:r}=e;let{value:n}=e;return(0,c.isArray)(n)?n=n.map((e=>e.term_object.term_id)):(0,c.isPlainObject)(n)&&(n=n.term_object.term_id),this.firstComparerIsCorrect(this.getEnvironmentValue(e,t),r,n)},getEnvironmentValue:(e,t)=>(0,c.get)(t,"term_ancestors",[])}),Nt={boolean:ft,post_term:Ot,post_ancestor_id:Dt,post_parent_id:dt,post_level:dt,post_format:dt,post_template:_t,term_level:dt,term_parent:Tt,term_ancestor:kt,user_role:dt};function $t(e,t,r){const n=e.map((e=>{if(e.relation)return $t(e.conditions,t,e.relation);{const r=(0,c.get)(Nt,e.type);return r?r.isFulfiled(e,t):(console.error((0,o.sprintf)((0,o.__)('Unsupported container condition - "%1$s".',"carbon-fields-ui"),e.type)),!1)}}));switch(r){case"AND":return n.every(Boolean);case"OR":return n.some(Boolean);default:return console.error((0,o.sprintf)((0,o.__)('Unsupported container condition relation used - "%1$s".',"carbon-fields-ui"),r)),!1}}const Gt=(0,a.withSelect)((e=>({containers:e("carbon-fields/metaboxes").getContainers()}))),Lt=(0,me.withEffects)((function(e,{context:t}){const r=(0,i.applyFilters)(`carbon-fields.conditional-display-post-parent.${t}`),n=(0,i.applyFilters)(`carbon-fields.conditional-display-post-format.${t}`),o=(0,i.applyFilters)(`carbon-fields.conditional-display-post-template.${t}`),a=(0,i.applyFilters)(`carbon-fields.conditional-display-post-term.${t}`),s=(0,i.applyFilters)(`carbon-fields.conditional-display-term-parent.${t}`),l=(0,i.applyFilters)(`carbon-fields.conditional-display-user-role.${t}`);return(0,Y.pipe)((0,Y.merge)(r,n,o,a,s,l),(0,Y.scan)(((e,t)=>f()(e,(e=>{(0,c.assign)(e,t)})))))}),{handler:function({containers:e,context:t}){return function(r){const n=(0,c.map)(e,((e,t)=>[t,$t(e.conditions.conditions,r,e.conditions.relation)]));n.forEach((([r,n])=>{const o=document.getElementById(r),i=document.querySelector(`.container-${r}`),a=!!i?.dataset?.mounted;if(o&&(o.hidden=!n),i)if(oe.createRoot){const o=et[r]||null;n&&!o&&rt(e[r],t),!n&&o&&o.unmount()}else n&&!a&&rt(e[r],t),!n&&a&&(delete i?.dataset?.mounted,i?._reactRootContainer?.unmount())}))}}}),Rt=(0,Q.compose)(Gt,Lt)((function(){return null}));function Bt(e){return decodeURIComponent((e+"").replace(/%(?![\da-f]{2})/gi,(function(){return"%25"})).replace(/\+/g,"%20"))}const Ut="customize.php",Vt="carbon_fields_container_";const qt=(0,me.withEffects)((function(){return(0,Y.merge)((0,Y.pipe)(Me((e=>window.jQuery(document).on("widget-added widget-updated",e)),(e=>window.jQuery(document).off("widget-added widget-updated",e)),((e,t)=>({event:e,$widget:t}))),(0,Y.filter)((({$widget:e})=>e[0].id.indexOf("carbon_fields_")>-1)),(0,Y.map)((e=>({type:"WIDGET_CREATED_OR_UPDATED",payload:e})))),(0,Y.pipe)(Me((e=>window.jQuery(document).on("ajaxSend",e)),(e=>window.jQuery(document).off("ajaxSend",e)),((e,t,r,n)=>({event:e,xhr:t,options:r,data:n}))),(0,Y.filter)((({options:e})=>(0,c.startsWith)(e.data,Vt))),(0,Y.map)((e=>({type:"WIDGET_BEIGN_UPDATED_OR_DELETED",payload:e})))))}),{handler:function(){return function(e){const{getContainerById:t}=(0,a.select)("carbon-fields/metaboxes"),{addContainer:r,removeContainer:n,addFields:o,removeFields:i}=(0,a.dispatch)("carbon-fields/metaboxes");switch(e.type){case"WIDGET_CREATED_OR_UPDATED":{const{event:t,$widget:n}=e.payload,i=(0,c.flow)(Bt,JSON.parse)(n.find("[data-json]").data("json")),a=[];if(i.fields=i.fields.map((e=>U(e,i,a))),o(a),r(i),rt(i,"classic"),window.cf.config.pagenow===Ut&&"widget-added"===t.type){const e=n.find('[name="widget-id"]').val();n.find('[name="savewidget"]').show().end().find(".widget-content:first").off("keydown","input").off("change input propertychange",":input");wp.customize.Widgets.getWidgetFormControlForWidget(e).liveUpdateMode=!1}break}case"WIDGET_BEIGN_UPDATED_OR_DELETED":{const[,r]=e.payload.options.data.match(/widget-id=(.+?)&/),o=`${Vt}${r}`,a=t(o);(0,oe.unmountComponentAtNode)(document.querySelector(`.container-${o}`));const c=_.map(a.fields,"id");n(o),i(c);break}}}}})((function(){return null}));var Mt=r(158);const Qt=(0,a.withSelect)((e=>({isDirty:e("carbon-fields/metaboxes").isDirty()})))((function(e){return Mt.createElement("input",{type:"hidden",name:window.cf.config.revisionsInputKey,disabled:!e.isDirty,value:"1"})}));var Kt=r(158);(0,o.setLocaleData)(window.cf.config.locale,"carbon-fields-ui");const Wt=re()?"gutenberg":"classic";(0,i.addAction)("carbon-fields.init","carbon-fields/metaboxes",(()=>{!function(e){const t=(0,a.select)("carbon-fields/metaboxes").getContainers();(0,c.forEach)(t,(t=>{rt(t,e)}))}(Wt),function(e){const{pagenow:t}=window.cf.config,r=document.createElement("div"),n=Kt.createElement(oe.Fragment,null,!re()&&Kt.createElement(ye,null),("widgets.php"===t||t===Ut)&&Kt.createElement(qt,null),Kt.createElement(Rt,{context:e}));oe.createRoot?(0,oe.createRoot)(r).render(n):(0,oe.render)(n,r);const o=document.querySelector("#poststuff");if(o){const e=document.createElement("div"),t=Kt.createElement(Qt,null),r=o.appendChild(e);oe.createRoot?(0,oe.createRoot)(r).render(t):(0,oe.render)(t,r)}}(Wt)}))})(),(this.cf=this.cf||{}).metaboxes=n})();